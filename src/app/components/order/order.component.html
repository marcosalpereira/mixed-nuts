<header class="main">
    <div class="app-title">{{appTitle}}</div>
    <div class="user-container" *ngIf="user">
        <div class="user" [title]="user.email">
            {{user.displayName ? user.displayName : user.email}}
        </div>
        <div title="Sair" (click)="logout()" class="photo" style="cursor: pointer">
            <img title="Sair" src="{{(user.photoURL) ? user.photoURL : '/assets/dummy-user.png'}}">
            <footer>Sair</footer>
        </div>
    </div>
    <div class="user-container" *ngIf="!user">
        <div class="user" style="cursor: pointer" (click)="login()">Clique para entrar
            usando conta do Google
        </div>
        <div class="photo">
            <img src="assets/dummy-user.png" alt="Não Logado">
        </div>
    </div>
</header>

<main>

    <p class="previsao">{{lastShipment ? 'Próxima remessa:' + lastShipment.date : 'Nenhuma remessa disponível'}}</p>
    <section *ngIf="shipmentOrders && user?.admin" class="orders">
        <span class="order">Total<span class="badge">{{totalShipmentOrder}}</span></span>
        <ng-container *ngFor="let sh of shipmentOrders">
            <span class="order" *ngIf="sh?.order?.amount > 0">{{sh.user.displayName}}
                <span class="badge">{{sh.order.amount}}</span>
            </span>
        </ng-container>
    </section>

    <section *ngIf="user && lastShipment?.status === 'OPEN'" class="order-amount">
        <p class="info">Ao selecionar uma das opções abaixo sua escolha já será registrada. Fique livre para mudar sua
            opção a qualquer momento (até o fechamento da remessa). Normalmente, nas sextas-feiras que
            antecedem a entrega a remessa é fechada.
        </p>
        <div (click)="onClick(0)" [class.selected]="orderAmount == 0"
            title="Não vou querer dessa vez">
            <img src="assets/no-thanks.jpeg" alt="Não vou querer dessa vez" class="qtd0">
            <footer>Zero</footer>
        </div>
        <div (click)="onClick(1)" [class.selected]="orderAmount == 1">
            <img src="assets/nuts192.png" title="Quero um pacote" alt="Quero um pacote" class="qtd1">
            <footer>Um Pacote</footer>
        </div>
        <div (click)="onClick(2)" [class.selected]="orderAmount == 2">
            <img src="assets/nuts192.png" title="Quero dois pacotes" alt="Quero dois pacotes" class="qtd2">
            <footer>Dois Pacotes</footer>
        </div>
    </section>

    <section class="history">
        <p>Histórico de pedidos</p>
        <div class="history">
            <span class="order" *ngFor="let order of orders">{{order.shipmentDate}}
                <span class="badge">{{order.amount}}</span>
            </span>
        </div>
    </section>

</main>
<footer class="main">
    <small>&copy; 2019 Marcosoft, Inc.</small>
    <img src="assets/marcosoft-w.png" alt="Marcosot">
</footer>